<% content_for(:head) do %>
  <link rel="manifest" href="/jarvis.webmanifest">
<% end %>

<% content_for(:favicon) do %>
  <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#00102B">
  <link rel="shortcut icon" href="/favicon/favicon.ico">
  <meta name="msapplication-TileColor" content="#00102B">
  <meta name="msapplication-config" content="/favicon/browserconfig.xml">
  <meta name="theme-color" content="#00102B">
<% end %>

<div class="widget-wrapper">
  <div class="widget-holder">
    <div class="widget tesla">
      <div class="lines">
        <p></p>
        <p></p>
        <p>Loading...</p>
      </div>
      <span class="disconnected"></span>
      <span class="last-sync">Never</span>
      <span class="error hidden">[ERROR]</span>
      <span class="refresh"><i class="ti ti-mdi-refresh"></i></span>
      <span class="loading hidden"><i class="ti ti-mdi-loading"></i></span>
    </div>
  </div>

  <div class="widget-holder">
    <div class="widget garage">
      <i class="ti ti-mdi-garage_open"></i>
      <i class="ti ti-mdi-garage"></i>

      <span class="disconnected"></span>
      <span class="last-sync">Never</span>
      <span class="error hidden">[ERROR]</span>
      <span class="refresh"><i class="ti ti-mdi-refresh"></i></span>
      <span class="loading hidden"><i class="ti ti-mdi-loading"></i></span>
    </div>
  </div>

  <div class="widget-holder">
    <div class="widget drugs">
      <i class="emoji">ðŸ’Š</i>
    </div>
  </div>

  <div class="widget-holder">
    <div class="widget events">
      <i class="emoji ti ti-fa-paper_plane"></i>
    </div>
  </div>

  <div class="widget-holder">
    <div class="widget contacts">
      <i class="emoji">ðŸ‘¤</i>
    </div>
  </div>

  <div class="widget-holder">
    <div class="widget command">
      Command

      <span class="disconnected"></span>
    </div>
  </div>

  <a href="<%= jil_prompts_path %>" target="_blank" class="widget-holder">
    <div class="widget care">
      <i class="emoji">ðŸª¶</i>
    </div>
  </a>

  <div class="widget-holder empty">
  </div>

  <div class="widget-holder">
    <div class="widget upcoming">
      <div class="lines" style="text-align: left;"></div>

      <span class="disconnected"></span>
      <span class="last-sync">Never</span>
      <span class="loading hidden"><i class="ti ti-mdi-loading"></i></span>
    </div>
  </div>
</div>

<div class="modal" id="command-modal" tabindex="-1">
  <div class="status"></div>
  <div class="close">
    <i class="ti ti-fa-close"></i>
  </div>
  <div class="modal-content">
    <div class="messages">
      <div class="message in">What can I do for you?</div>
    </div>
    <div class="text-entry">
      <input type="text" name="" value="">
    </div>
  </div>
</div>

<%=
  mini_widgets("contacts-modal") do
    [
      ["ðŸ ", :Home],
      ["ðŸ”¨", :"Home Depot"],
      ["ðŸ¤¸â€â™€ï¸", :"Lowe's Airsports"],
      ["ðŸŽ³", :Bowling],
      ["ðŸ¬", :Costco],
      ["ðŸ¥", :CarWash],
      ["ðŸ“¦", :ParkourUtah],
      ["ðŸŒï¸â€â™‚ï¸", :Lighten],
    ].then { |contact_names|
      contacts = Contact.where.not(address: nil).where(name: contact_names.map(&:last)).to_a
      contact_names.map { |line|
        line.tap { line[1] = contacts.find { |c| c.name.to_s == line[1].to_s } }
      }
    }.map do |display, contact|
      name = contact&.nickname || contact&.name
      next if name.blank?

      [display, name, "Take me to #{name}", name]
    end
  end
%>

<%=
  mini_widgets("events-modal") do
    [
      [emoji("ðŸ”„"), :Reload, ".reload"],
      ["ðŸ’§", :Water],
      ["ðŸ¦·", :Teeth],

      ["ðŸš¿", :Shower],
      ["ðŸ‘•", :Laundry, "do laundry"],
      [emoji_stack("ðŸ’ª", "âŒ"), :Done, "No more pullups today"],

      [emoji("ðŸ‹ï¸â€â™‚ï¸"), :Workout, "log Workout {{What did you do?}}"],
      ["5#{emoji("ðŸ’ª")}", :five_pulls, "log Pullups 5"],
      ["##{emoji("ðŸ’ª")}", :enter_pulls, "log Pullups {{How many pullups?}}"],

      [emoji("ðŸ–‹"), :Custom, "log {{Log what?}}"],
      ["ðŸ•", :Food, "log Food {{What did you eat?}}"],
      ["ðŸ§ƒ", :Drink, "log Drink {{What did you drink?}}"],

      ["Protein", :Protein, "log Drink Protein"],
      ["ðŸ", :Pineapple, "log Drink Pineapple Juice"],
      ["ðŸ¥ƒ", :Alcohol, "log Alcohol {{What did you drink?}}"],

      [img(:can), :log_soda_dew, "log soda Mountain Dew"],
      [img(:pepsi), :log_soda_pepsi, "log soda Pepsi"],
      [img(:coke), :log_soda_coke, "log soda Coke"],

      *[:tropical, :peach, :arctic].map { |flavor|
        [
          img(:celsius),
          "log_celsius_#{flavor.to_s.downcase}",
          "log drink Celsius #{flavor.to_s.titleize} Vibe",
          flavor.to_s.titleize
        ]
      },

      *[:orange, :kiwi_guava, :wild_berry].map { |flavor|
        [
          img(:celsius),
          "log_celsius_#{flavor.to_s.downcase}",
          "log drink Celsius #{flavor.to_s.titleize}",
          flavor.to_s.titleize
        ]
      },
    ]
  end
%>

<%=
  mini_widgets("drugs-modal") do
    [
      [:Vitamins],
      ["D-AmphXR 20mg"],
      ["D-Amph 20mg"],
      ["Pristiq 25mg"],
      ["AdderallXR 15mg"],
      ["AdderallXR 20mg"],
      ["Buspirone 20mg"],
      ["Relaxium 1"],
      ["Relaxium 2"],
      ["NQ"],
      ["NQ Half"],
      ["Methyl 10mg"],
      ["Methyl 20mg"],
      ["Escital 20mg"],
      ["X"],
      ["Z", nil, "log Z {{}}"],
    ]
  end
%>
